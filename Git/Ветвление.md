[[Git]]

**Ветка** - это ссылка на коммит. 
`git branch` - возвращает список веток и помечает `*`, на которой находимся
## Создание ветки
```shell
git branch -b branch-name
```
Создаст ветку с именем `branch-name`
## Переключение веток
Для переключения веток используется `git switch`, немного старая версия это `git checkout`
`git switch branch-name` - переключится на ветку `branch-name`

## Переключение + создание
Можно создать ветку и сразу же на нее переключится
```shell
git switch -c branch-name
```
Либо
```shell
git checkout -b branch-name
```
## Слияние веток
![[Диаграмма без названия (2).jpg]]
В прямоугольниках приведены файлы в каждом из коммитов. Чтобы сделать слияние мы переключаемся на интеграционную (основную) ветку и пишем
```shell
git merge fall-menu
```
В данном случае если файл `menu.md` не менялся, то будет fast-forward слияние. Это значит:
- Нам нужно сделать так, чтобы были изменения, которые в коммите B и оригинальный коммит A
- Так как коммит B основан на коммите A, то файл menu.md не менялся. 
- Значит добавился просто новый файл.
В случае fast-forward Git просто "перескочит" на коммит B.
Но не всегда происходит fast-forward. Если мы теперь захотим влить ветку thurs-menu в master, то просто переключится уже будет нельзя, так как master уже отошел от изначального коммита A. В таком случае Git создаст сообщение коммита, в котором отразятся результаты работы двух веток
![[Pasted image 20250318201652.png]]
В таком коммите будет уже две ссылки на родителя (в данном случае C и D). 
## Конфликты
Когда мы меняем файл в разных ветках, то при слиянии гит не будет знать какой из вариантов использовать:
- Принять изменения из master
- Принять изменения из вливаемой ветки
- Объединить эти изменения
- Сделать что-то другое
Поэтому он в такой ситуации отдаст управление нам и остановит выполнение слияние на половине, пока мы не решим конфликты
![[Pasted image 20250318201926.png]]
И также скажет где возникли конфликты, если мы вызовем `git status`
![[Pasted image 20250318201955.png]]
При конфликтах исходные файлы поменяются. Там появятся разделы конфликтов
```md
<<<<<<<<<<<<<< HEAD
func f() string {
	return "qwe"
}
==================
func f() {
	fmt.Println("qwe")
}
>>>>>>>>>>>>>>>> feat-a
```
`<<<<<<<<<<<<< HEAD` - это то, какие данные в текущей ветки (куда вливаем)
`=` - разделитель
`>>>>>>>>>>>> feat-a` - это то, какие данные во вливаемой ветки
Чтобы решить конфликт нужно лишь выбрать что остановить и удалить эти мета штуки.
Далее сделать 
```shell
git add main.go
git commit
```
## Удаление веток
```shell
git branch -d branch-name
```
При удалении влитой ветки в истории коммитов изменений не будет. 
Также если ветка не была влита, то гит предупредит об этом
![[Pasted image 20250318202705.png]]
ТО есть гит говорит - ты потеряешь все, что сделал. Но можно использовать флаг `-D` и все. 
