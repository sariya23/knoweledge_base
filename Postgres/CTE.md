CTE - могут быть как обычные так и материализованные. В большинстве своем - они просто позволяют писать более красивые запросы. Но также могут быть использованы и для оптимизации. Используя материализованное cte можно добиться того, что тяжелый запрос выполнится только 1 раз
```sql
with complex_cte as materialized (
	select ...
)
select * from complex_cte;
```
![[Pasted image 20250605162637.png]]
Обычныйе CTE просто для красоты. Также при использовании обычных CTE постгрес может встраивать данные из CTE в запрос