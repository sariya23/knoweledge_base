[[Hadoop]]
Во-первых этот hdfs нужно поднять локально. Вот отсюда - https://github.com/big-data-europe/docker-hive. А потом зайти в контейнер с namenode
`hdfs dfs` может применяться только в HDFS
`hadoop fs` - универсальная команда и может работать и вдругих файловых системах, поддерживающих hadoop

**Создание папки** - `hdfs dfs -mkdir /dir_name`
**Просмотр содержимого** - `hdfs dfs -ls /`
А вот команды cd тут нет. Так как остальные команды выполняются за один раз и отключаются, то есть надобности в какой-то текущей директории нет. Да и файлы создавать через touch нельзя, так как hdfs ореентирован на хранение больших данных 
Но файл закинуть все-таки можно. Для этого используется команда `-put`, где сначала прописывается локальный путь до файла, а потом путь, куда мы хотим поместить файл в hdfs: `hdfs dfs -put local/path /path/in/hdfs`

**Посмотреть содержимое файла** - `hdfs dfs -cat path/file`
Ну и остальные команды: `-mv`, `-cp`, `-rm`
## Получение информации о файле или директории
Похожа на команду из линукса: `hdfs dfs -stat [формат] [path]`
- `%b` - размер файла в байтах
- `%y` - время последней модификации файла
- `%n` - имя файла
- `%o` - права доступа
- `%r` - кол-во реплик файла
- `%u` - владелец файла
- `%g` - группа файла
Команда может выглядеть так: `hdfs dfs -stat "%b %r" path/to/file`
## Отчет о состоянии HDFS
`hdfs dfsadmin -report` вернет отчет о состоянии системы
![[Pasted image 20250621181006.png]]
- Configured capacity - общая емкость всех datanode, доступных hdfs (хз почему у меня 1000 гб)
- Present Capacity - доступная емкость с учетом резервированного места
- DFS Remaining - оставшееся свободное место всех дата нод
- DFS Used - используемая память
- DFS Used % - используемая память в процентах
- Under replicated blocks - кол-во блоков, у которых недостаточно реплик
- Block with corrupt replicas - кол-во блоков с поврежденными репликами
- Missing blocks - кол-во блоков, которые отсутствуют в кластере
- Live datanodes - кол-во доступных нод
- Name и Hostname - имя и айпи хоста
- Decommission status - статус ноды
- Остальное как и до этого, только для ноды
## Узнать локацию блоков
```shell
hdfs fsck /test1/localfile -files -blocks -locations
```
![[Pasted image 20250621182352.png]]
У меня поднята только одна реплика, поэтому результат такой