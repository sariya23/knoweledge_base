[[Airflow]]
Контекст - это словарь с данными, которые генерируется при запуске дага. Во время выполнения дага мы можем обращаться к этим параметрам по ключу. 
Чтобы посмотреть контекст через UI:
- Тыкаем на таску
- Потом на Instance Details
- Таблица Task Instance Attributes
![[Pasted image 20250808104921.png]]
## Контекст в PythonOperator
Для доступа к контексту в `PythonOperator` нужно дополнительно передавать в функции кварги
```python
from airflow import DAG 
from datetime import datetime 
from airflow.operators.python_operator import PythonOperator 

 
dag = DAG(
   dag_id="0_Examples_3_3_1_context", 
   start_date=datetime(2024, 1, 1),
   end_date=datetime(2024, 1, 4),
   schedule_interval="@daily",
   tags=['examples']
) 

def _print_exec_date(**context): 
    print("Контекст", context) 
    
print_exec_date = PythonOperator( 
    task_id="print_exec_date", 
    python_callable=_print_exec_date, 
    dag=dag)
```
## Контекст в BashOperator
В `BashOperator` для доступа к контексту используется шаблонизатор Jinja
```python
from airflow import DAG 
from datetime import datetime 
from airflow.operators.bash_operator import BashOperator 

dag = DAG(dag_id="bash", 
          start_date= datetime(2024, 1, 1),
          end_date= datetime(2024, 1, 3),
          schedule_interval="@daily") 

bash_task = BashOperator( 
    task_id="bash_task", 
    bash_command='echo "{{ execution_date }}" ' , 
    dag=dag )
```
## Идемпотентности
Идемпотентностью задачи в Airflow является свойство того, что задачу за прошлый промежуток времени можно перезапустить с теми же параметрами, как будто она запускается реально в прошлом