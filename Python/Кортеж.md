[[Python]]
У кортежа 2 функции: представлять собой неизменяемую последовательность, а также какую-то запись без имен полей
## Кортежи как записи
Под записью, например, предполагается запись из БД. Они там также иногда называются кортежи.
Пример кортежа как записи:
```python
coord = (123.123123, 89.9823)
```
Изменение порядка элементов нарушает семантику. В общем типа датакласс или именованный кортеж
## Кортеж как неизменяемый список
Использование кортежа как неизменяемого списка позволяет:
- Прояснить юз кейсы. Кортеж неизменяемый, поэтому читатель знает, что он не будет меняться
- Производительность. Интерпретатор делает некоторые оптимизации при работе с кортежем - выполняет меньше байт-кода
Неизменяемость кортежа относится только к его ссылкам внутри - их нельзя изменить или удалить. Но можно изменить сам объект, на который ведет ссылка:
```python
a = ([1, 2], [3, 4])
a[-1].append(5)
print(a)  # ([1, 2], [3, 4, 5])
```
Также кортеж, который хранит ссылки на изменяемый объект нельзя хэшировать, то есть использоваться в качестве ключа словаря он не может:
```python
a = ([1, 2], [3, 4])
d = {a: "2"}  # TypeError: unhashable type list
```
Оптимизации, которые делает интерпретатор:
- При создании кортежа выполняется меньше байт-кода
- При `tuple(t)` новый кортеж не создается, просто возвращается ссылка на тот же кортеж. Со списком так не прокатывает и создается его копия
![[tuple_link_list_new.png]]
- При создании кортежа выделается ровно столько памяти, сколько нужно. При создании списка память выделяется с запасом
- (посмотреть у Соболева про это)Ссылки на элементы кортежа хранятся в массиве, которые напрямую лежит в структуре кортежа. В списках же хранится указатель на этот массив. Этот уровень косвенности снижает эффективность процессорных кэшей.