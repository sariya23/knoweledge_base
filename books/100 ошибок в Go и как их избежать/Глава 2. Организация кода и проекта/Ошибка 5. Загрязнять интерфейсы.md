[[100 ошибок в Go и как их избежать]]

Загрязнение интерфейса - это перегруз кода ненужными абстракциями, затрудняющими понимание 

## Концепции
> Интерфейс предоставляет способ задать поведение объекта

> Чем больше интерфейс, тем слабее абстракция. *Роб Пайк*

## Когда использовать интерфейсы
### Общее поведение
Первый вариант - это когда несколько типов реализуют общее поведение. Пример в стандартной библиотеке - интерфейс в пакете `sort`
```go
type Interface interface {
	Len() int
	Less(i, j int) bool
	Swap(i, j) int
} 
```
Сортировку коллекции можно разбить на 3 этапа:
- Получение данных о кол-ве элементов в коллекции (`Len`)
- Сообщение о том, должны ли элементы поменяны местами (`Less`)
- Перестановка двух элементов (`Swap`)

### Снижение связанности (decoupling)
Если мы полагаемся на абстракцию вместо конкретной реализации, сама реализация может быть заменена на любую другую без необходимости менять код - SO*L*ID подстановка Лисков

Предположим мы решили хранить данные в конкретном типу mysql.Store. И если функция будет принимать эту конкретику, то возникнут проблемы. Во-первых при тестировании. Нам придется запускать экземпляр MySQL, что не всегда нужно. Для большей гибкости лучше вынести метод сохранения в интерфейс и принимать его.

### Ограничение поведения
Если мы хотим, чтобы метод какого-то типа был недоступен в какой-то части кода, можно обернуть только нужные методы в абстракцию и передавать ее.

## Загрязнение интерфейса
> Абстракции нужно открывать, а не создавать

> Нужно не конструировать интерфейсы, а **ждать** возникновения конкретной потребности в них. Иными словами, создавайте интерфейс только тогда, когда он действительно нужен, а не тогда, когда возникает лишь ощущение, что он **может** понадобиться

> Добавление бесполезного косвенного уровня не приносит никакой пользы, а лишь создает бесполезную абстракцию, затрудняющую чтение, понимание и осмысление

> Не программируйте интерфейсы, открывайте их. *Роб Пайк* 