[[100 ошибок в Go и как их избежать]]

Я всегда писал табличные тесты через срез анонимных структур. Да и во всех гайдах так делали тоже. Автор же использует мапу. Где ключ - название кейса, а значение - структура 
```go
tests := map[string]struct{
	input string
	expected string
} {
	`empty`: {
		
	},
	`ending with \n`: {
	
	},
	// ...
}
```
При создании табличного теста, каждый тест кейс - это сабтест, который запускается с помощью `t.Run()`. Эти сабтесты также можно запускать параллельно. 
```go
fir name, tc := range tests {
	t.Run(name, func(t *testing.T) {
		t.Parallel()
		// using tc
	})
}
```
На старых версиях Go не надо забывать о приколе цикла и конкурентности, поэтому надо затенять переменную `tc`
```go
fir name, tc := range tests {
	tc := tc
	t.Run(name, func(t *testing.T) {
		t.Parallel()
		// using tc
	})
}
```