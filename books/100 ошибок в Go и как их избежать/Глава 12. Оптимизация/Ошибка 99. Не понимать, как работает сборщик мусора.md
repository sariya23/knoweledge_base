[[100 ошибок в Go и как их избежать]]

## Концепция
Сборщик мусора хранит дерево ссылок на объекты. GC в Go основан на алгоритме пометок (mark-and-sweep-algorithm), который состоит из двух этапов:
- Этап пометки (mark) - просмотр всех объектов в куче и пометка тех, которые все еще используются
- Этап очистки (sweep) - просмотр дерева ссылок от корня и освобождение места, ранее выделенного под блоки объектов, на которые больше нет никаких ссылок

Когда запускается сборщик мусора, он сначала выполняет действия, которые приводят к остановке всей системы. После выполнения шагов по сборке мусора система продолжает выполнение. 

Также есть вспомогательный сборщик мусора. Например, нам нужна большая куча только на этапе инициализации приложения, но не далее. Это обрабатывается именно им. Через какое-то время GC Обнаруживает, что такая большая куча больше не нужна, поэтому он освобождает часть памяти и отдает ее ОС.

Когда выполняется цикл сборки мусора? Этот параметр задается через переменную `GOGC`. Эта переменная определяет процент роста кучи с момента последней сборки мусора. По умолчанию она 100%. То есть если изначально куча была 128 Мбайт, то следующая сборка мусора запустится, когда размер кучи будет 256 Мбайт.