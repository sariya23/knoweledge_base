[[PostgreSQL. Основы языка SQL. Учебное пособие]]

Если у столбца есть индекс и используется `LIKE` вместе с шаблоном `%`, то индекс для ускорения запроса использоваться не будет

В Postgres есть регулярные выражения POSIX. Оператор поиска по регулярке - `~`
```sql
select *
from t
where n ~ '^(A|boe)'
```

При формировании соединений подключение таблиц выполняется слева направо, то есть берется самая первая таблица в предложении `FROM` и с ней соединяется вторая таблица, затем с полученным результатом соединяется 3-ая таблица и тд

Есть операторы, которые позволяют выполнять операции с выборками, как с множествами
- `UNION` - объединение
- `INTERSECT` - пересечение
- `EXCEPT` - разность
Важно, чтобы запросы возвращали одинаковое число столбцов
```sql
select a from t1
UNION
select b from t2;
```

Если в запросе есть `GROUP BY` и `HAVING`, то оконные функции вызываются *после* них

CTE бывают рекурсивными. Но это жесть какая-то
```sql
with recursive ranges (min_sum, max_sum) as
(
	values (0, 100000)
	union all
	select min_sum + 10000, mix_sum + 10000
	from ranges
	where max_sum < (select max(total_amount) from bookings)
)
```
Базовый случай - это условие в `where`. Как только условие станет ложным, запрос прекратится