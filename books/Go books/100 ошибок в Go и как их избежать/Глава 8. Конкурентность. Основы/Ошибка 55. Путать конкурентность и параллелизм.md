[[100 ошибок в Go и как их избежать]]

***Concurrency is Not Parallelism***

Рассмотрим разницу между параллелизмом и конкурентностью.
У нас есть кофейня, с одним бариста, который и помол кофе делает, и заказы принимает, и кофе варит
![[Pasted image 20240907162754.png]]

Одному бариста сложно делать все одному, поэтому владелец кофейни решает купить еще одну кофе машину и нанять еще одного бариста
![[Pasted image 20240907162846.png]]
Клиент в очереди будешь ждать, пока какой-то бариста станет свободен и сможет принять заказ. Мы можем нанимать все больше и больше бариста и покупать все больше и больше кофе машин. Здесь каждая система независима. У каждого бариста своя машина и свой клиент. Это - ***параллельная*** реализация системы

Чтобы увеличить пропускную способность можно воспользоваться еще одним вариантом. Мы можем разделить обязанности сотрудников. Например, один отвечает за прием заказа, другой за помол кофе, который он сварит в единственной кофемашине. Чтобы не заставлять клиентов ждать в общей очереди заказа, мы можем создать для них отдельную очередь.
![[Pasted image 20240907163226.png]]

В такой системе мы не совершаем действия параллельно. В отличии от параллелизма, смысл которого в том, что **одни и те же действия совершаются одновременно**, конкурентность связана со структурой.

А если нужно увеличить пропускную способность? Так как помол занимает больше всего времени, мы можем нанять еще одного сотрудника для помола зерен
![[Pasted image 20240907163627.png]]
Структура прежняя - принять заказ, смолоть кофе и сварить его. Но мы вернулись к добавлению элемента параллелизма, пусть для одного конкретного шага. 
Например, нам не хватает кофеварок, из-за чего потоки с бариста простаивают и ждут, пока она освободится. Мы можем добавить еще кофемашин
![[Pasted image 20240907163826.png]]
И снова структурно изменений нет, но мы добавили еще больше параллелизма. 
***Конкурентность обеспечивает возможность параллелизма***

> *Конкурентность* - это о **работе** с большим кол-вом вещей одновременно
> *Параллелизм* - это о **выполнении** большого кол-ва дел одновременно

