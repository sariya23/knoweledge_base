[[100 ошибок в Go и как их избежать]]

Важно помнить, что не все символы можно представить одним байтом. Рассмотрим такой код:
```go
func main() {
    s := "hêllo"
    for i := range s {
        fmt.Println(i, string(s[i]))
    }
}
```
```
0 h
1 Ã
3 l
4 l
5 o
```
Во-первый у нас пропустился индекс 2, во-вторых вместе e вывелось A. Так происходит, потому что этот символ нельзя представить одним байтом. И при выводе `s[i]` выводится не i-ая руна, а i-ый байт. 
![[Pasted image 20240904121813.png]]

У решении этой проблемы есть 2 способа. Первый - это использовать переменную значения в цикле:
```go
  

func main() {
    s := "hêllo"
    for i, v := range s {
        fmt.Println(i, string(v))
    }
}
```
```
0 h
1 ê
3 l
4 l
5 o
```
Цикл for-range перебирает именно руны, поэтому выводится тот символ, который и ожидался. Но индекс также пропускается

Еще один способ - это преобразование строки в срез рун:
```go
func main() {
    s := "hêllo"
    runes := []rune(s)
    for i, v := range runes {
        fmt.Println(i, string(v))
    }
}
```
```
0 h
1 ê
2 l
3 l
4 o
```
И индекс не пропускается, и символы выводятся нужные. Но копирование строки в слайс рун затратная операция - `O(n)`. 